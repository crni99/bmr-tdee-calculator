<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description"
        content="Calculate your Basal Metabolic Rate (BMR) and Total Daily Energy Expenditure (TDEE) to better understand your energy needs." />
    <meta name="keywords" content="BMR, TDEE, calories, health, nutrition, calculator" />
    <meta name="author" content="Ognjen Andjelic" />
    <meta property="og:title" content="Calculate BMR & TDEE" />
    <meta property="og:description"
        content="A simple calculator to calculate your Basal Metabolic Rate and Total Daily Energy Expenditure." />
    <title>BMR & TDEE Calculator</title>

    <style>
        :root {
            --red-color: #810101;
            --red-hover-color: #6e0101;
        }

        body {
            background-color: #121212;
            color: #ffffff;
            font-family: Tahoma, sans-serif;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        main {
            width: 100%;
            max-width: 600px;
            padding: 0px 20px 20px 20px;
        }

        h1 {
            font-weight: 700;
            text-align: center;
        }

        .form-container {
            background-color: #1e1e1e;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(255, 255, 255, 0.1);
        }

        fieldset {
            border: 1px solid #444;
            border-radius: 6px;
            margin-bottom: 20px;
            padding: 15px 20px;
        }

        legend {
            font-weight: bold;
            padding: 0 5px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .radio-item input[type="radio"] {
            position: absolute;
            opacity: 0;
            width: 0;
            height: 0;
        }

        .radio-item label {
            font-size: 16px;
            margin-left: 8px;
            position: relative;
            padding-left: 30px;
            cursor: pointer;
            user-select: none;
            line-height: 1.2;
        }

        .radio-item label:before {
            content: '';
            display: inline-block;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            border: 2px solid var(--red-color);
            background-color: #1e1e1e;
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
        }

        .radio-item input[type="radio"]:checked+label:before {
            background-color: var(--red-color);
        }

        .input-group {
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
        }

        label[for] {
            margin-bottom: 6px;
        }

        small.helper-text {
            font-size: 12px;
            color: #aaa;
            margin-top: 4px;
        }

        .form-container input[type="number"] {
            padding: 10px;
            border-radius: 4px;
            background-color: #2c2c2c;
            color: #ffffff;
            border: 1px solid #444;
            font-size: 16px;
        }

        .form-container input[type="number"]:focus {
            border-color: var(--red-color);
            outline: none;
        }

        .form-container button {
            background-color: var(--red-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin-bottom: 10px;
            transition: background-color 0.3s;
            width: 100%;
        }

        .form-container button:hover {
            background-color: var(--red-hover-color);
        }

        .form-container button[type="reset"] {
            background-color: #444;
        }

        .form-container button[type="reset"]:hover {
            background-color: #666;
        }

        .error-message {
            color: #ff6b6b;
            font-size: 13px;
            margin-top: 4px;
        }

        #results {
            margin-top: 20px;
            padding: 15px 20px;
            border: 1px solid #444;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            text-align: center;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }

        #results.visible {
            opacity: 1;
        }

        #copyResults {
            margin-top: 25px;
        }

        .success-message {
            color: #4caf50;
            font-size: 14px;
            margin-top: 16px;
            text-align: center;
            opacity: 0;
            transition: opacity 0.4s ease-in-out;
        }

        .success-message.visible {
            opacity: 1;
        }

        @media (max-width: 430px) {
            #results {
                font-size: 16px;
            }
            .radio-item label {
                font-size: 14px;
            }
        }

        @media (max-width: 400px) {
            #results {
                font-size: 14px;
            }
            .radio-item label {
                font-size: 12px;
            }
        }
    </style>
</head>

<body>
    <main>
        <h1>BMR &amp; TDEE Calculator</h1>
        <form class="form-container" id="bmrForm" aria-label="BMR and TDEE Calculator" novalidate>
            <fieldset>
                <legend>Sex:</legend>
                <div class="radio-item">
                    <input type="radio" id="men" name="gender" value="men" required />
                    <label for="men">Men</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="women" name="gender" value="women" required />
                    <label for="women">Women</label>
                </div>
                <div class="error-message" id="gender-error" aria-live="assertive"></div>
            </fieldset>

            <div class="input-group">
                <label for="height">Height (cm):</label>
                <input type="number" id="height" name="height" placeholder="Enter your height" required min="30"
                    max="300" step="0.1" inputmode="decimal" />
                <small class="helper-text">Please enter your height in centimeters.</small>
                <div class="error-message" id="height-error"></div>
            </div>

            <div class="input-group">
                <label for="weight">Weight (kg):</label>
                <input type="number" id="weight" name="weight" placeholder="Enter your weight" required min="2"
                    max="600" step="0.1" inputmode="decimal" />
                <small class="helper-text">Please enter your weight in kilograms.</small>
                <div class="error-message" id="weight-error"></div>
            </div>

            <div class="input-group">
                <label for="age">Age (years):</label>
                <input type="number" id="age" name="age" placeholder="Enter your age" required min="1" max="120"
                    inputmode="numeric" />
                <small class="helper-text">Please enter your age in years.</small>
                <div class="error-message" id="age-error"></div>
            </div>

            <fieldset>
                <legend>Activity Level:</legend>
                <div class="radio-item">
                    <input type="radio" id="activity1" name="activity" value="1" required />
                    <label for="activity1">Inactive (little or no exercise + desk job)</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="activity2" name="activity" value="2" />
                    <label for="activity2">Lightly active (light exercise 1-3 days/week)</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="activity3" name="activity" value="3" />
                    <label for="activity3">Moderately active (3-5 days/week)</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="activity4" name="activity" value="4" />
                    <label for="activity4">Very active (6-7 days/week)</label>
                </div>
                <div class="radio-item">
                    <input type="radio" id="activity5" name="activity" value="5" />
                    <label for="activity5">Extremely active (physical job, 2x/day training)</label>
                </div>
                <div class="error-message" id="activity-error" aria-live="assertive"></div>
            </fieldset>

            <button id="calculateBMR" type="submit">Calculate</button>
            <button type="reset">Reset</button>
            <div id="results" role="region" aria-live="polite"></div>
            <button id="copyResults" type="button" style="display:none;">Copy Results</button>
            <div id="copy-success" class="success-message" aria-live="polite"></div>
        </form>
    </main>

    <script>
        const form = document.getElementById('bmrForm');
        const resultsDiv = document.getElementById('results');
        const copyBtn = document.getElementById('copyResults');

        function showError(id, message) {
            document.getElementById(id).textContent = message;
        }

        function clearErrors() {
            ['gender-error', 'height-error', 'weight-error', 'age-error', 'activity-error'].forEach(id => {
                showError(id, '');
            });
        }

        form.addEventListener('submit', e => {
            e.preventDefault();
            clearErrors();
            resultsDiv.classList.remove('visible');
            copyBtn.style.display = 'none';

            const gender = document.querySelector('input[name="gender"]:checked')?.value;
            const height = parseFloat(document.getElementById('height').value);
            const weight = parseFloat(document.getElementById('weight').value);
            const age = parseInt(document.getElementById('age').value, 10);
            const activityLevel = document.querySelector('input[name="activity"]:checked')?.value;

            let hasError = false;

            if (!gender) {
                showError('gender-error', 'Please select your sex.');
                hasError = true;
            }

            if (isNaN(height) || height < 30 || height > 300) {
                showError('height-error', 'Height must be between 30 and 300 cm.');
                hasError = true;
            }

            if (isNaN(weight) || weight < 2 || weight > 600) {
                showError('weight-error', 'Weight must be between 2 and 600 kg.');
                hasError = true;
            }

            if (isNaN(age) || age < 1 || age > 120) {
                showError('age-error', 'Age must be between 1 and 120.');
                hasError = true;
            }

            if (!activityLevel) {
                showError('activity-error', 'Please select your activity level.');
                hasError = true;
            }

            if (hasError) {
                resultsDiv.textContent = '';
                return;
            }

            const bmr = gender === 'men'
                ? 66.47 + (13.75 * weight) + (5.003 * height) - (6.755 * age)
                : 655.1 + (9.563 * weight) + (1.85 * height) - (4.676 * age);

            const activityMultipliers = {
                1: 1.2,
                2: 1.375,
                3: 1.55,
                4: 1.725,
                5: 1.9
            };
            const tdee = bmr * activityMultipliers[activityLevel];

            resultsDiv.innerHTML = `
                <div>ðŸ§¬&nbsp;<strong>Your BMR is: ${Math.round(bmr).toLocaleString('sr-Latn-RS')} kcal/day</strong></div>
                <div style="margin-top: 10px;">ðŸ”‹&nbsp;<strong>Your TDEE is: ${Math.round(tdee).toLocaleString('sr-Latn-RS')} kcal/day</strong></div>
            `;
            resultsDiv.classList.add('visible');
            copyBtn.style.display = 'block';
        });

        form.addEventListener('reset', () => {
            clearErrors();
            resultsDiv.textContent = '';
            resultsDiv.classList.remove('visible');
            copyBtn.style.display = 'none';
        });

        copyBtn.addEventListener('click', () => {
            const successMsg = document.getElementById('copy-success');

            const strongTags = resultsDiv.querySelectorAll('strong');
            const cleanText = Array.from(strongTags)
                .map(tag => tag.textContent.trim())
                .join('\n');

            navigator.clipboard.writeText(cleanText)
                .then(() => {
                    successMsg.textContent = 'âœ… Results copied to clipboard!';
                })
                .catch(() => {
                    successMsg.textContent = 'âŒ Failed to copy results.';
                })
                .finally(() => {
                    successMsg.classList.add('visible');
                    setTimeout(() => {
                        successMsg.classList.remove('visible');
                        successMsg.textContent = '';
                    }, 3000);
                });
        });

    </script>
</body>

</html>